# Copyright 2025 The Chromium Authors
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/config/android/rules.gni")
import("//third_party/grpc-java/grpc_java_library.gni")

# Classes that live inside the apk split.
android_library("impl_java") {
  sources = [
    "java/src/org/chromium/chrome/modules/on_demand/OnDemandModuleEntryPointsImpl.java",
    "java/src/org/chromium/chrome/modules/on_demand/OnDemandModuleInternalEntryPoints.java",
  ]
  deps = [
    ":data_importer_service_impl_java",
    ":provider_java",
    "//base:service_loader_java",
  ]
}

# Classes that live in the base module.
android_library("provider_java") {
  sources = [ "java/src/org/chromium/chrome/modules/on_demand/OnDemandModuleEntryPoints.java" ]
  deps = [
    "//components/module_installer/android:module_installer_java",
    "//components/module_installer/android:module_interface_java",
  ]
  annotation_processor_deps =
      [ "//components/module_installer/android:module_interface_processor" ]
}

proto_java_library("os_migration_target_service_proto_java") {
  proto_path = "java/src/org/chromium/chrome/browser/data_import"
  sources = [ "$proto_path/os_migration_target_service.proto" ]
}

grpc_java_library("os_migration_target_service_grpc_java") {
  proto_path = "java/src/org/chromium/chrome/browser/data_import"
  sources = [ "$proto_path/os_migration_target_service.proto" ]
  deps = [ ":os_migration_target_service_proto_java" ]
}

android_library("data_importer_service_impl_java") {
  sources = [ "java/src/org/chromium/chrome/browser/data_import/DataImporterServiceImpl.java" ]
  deps = [
    ":os_migration_target_service_grpc_java",
    ":os_migration_target_service_proto_java",
    "//base:callback_java",
    "//base:log_java",
    "//base:tasks_java",
    "//base/version_info/android:version_constants_java",
    "//chrome/android:base_module_java",
    "//chrome/android:chrome_java",
    "//chrome/browser/flags:java",
    "//chrome/browser/profiles/android:java",
    "//components/cached_flags:java",
    "//third_party/android_deps:com_google_code_findbugs_jsr305_java",
    "//third_party/android_deps:io_grpc_grpc_api_java",
    "//third_party/android_deps:io_grpc_grpc_binder_java",
    "//third_party/android_deps:io_grpc_grpc_stub_java",
    "//third_party/android_deps:protobuf_lite_runtime_java",
  ]
}
